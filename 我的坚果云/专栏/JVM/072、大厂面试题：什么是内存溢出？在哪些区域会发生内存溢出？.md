## **072、大厂面试题：什么是内存溢出？在哪些区域会发生内存溢出？**

### 哪些区域会发生内存溢出？

#### 3、到底执行哪些代码：JVM首先得加载你的类

所以既然JVM要执行你的代码，首先当然得把你写好的类加载到内存里来啊。

所以JVM的内存区域里大家都知道，有一块区域叫做 永久代，当然JDK1.8 以后，叫 Metaspace了，这块内存区域就是用来存放你的各种类的信息的，包括JDK自身内置的一些类信息，都在这块区域里。

好，那么既然有这么一块Metaspace 区域是用来存放类消息的，`那么是不是有可能这个 Metaspace 区域里就会发生OOM?`

没错，是有这种可能的。

#### 4、Java虚拟机栈：让线程执行各种方法

Java语言中的一个通用的规则，就是一个JVM进程总是从main方法开始执行的。

但是等一等，JVM进程里的谁去执行main()方法里的代码？

`其实所有的方法执行，都必须依赖JVM进程中的某个线程去执行，你可以理解为线程才是执行我们写的代码的核心主体。`

JVM进程启动之后默认就会有一个main线程，这个main线程就是专门负责执行main()方法的。

**每个线程都有一个自己的虚拟机栈，就是所谓的栈内存。**

然后这个线程只要执行一个方法，就会为方法创建一个栈帧，将栈帧放入自己的虚拟机栈里去，然后在这个栈帧里放入方法中定义的各种局部变量。

JVM的参数设置里有一个参数，可以设置JVM中每个线程的虚拟机栈的内存大小的，一般是设置为1MB。

那么，既然每个线程的虚拟机栈的内存大小是固定的，是否可能会发生虚拟机栈的内存溢出？

`没错，所以，第二块可能发生OOM内存溢出的区域，就是每个线程的虚拟机栈内存。`

#### 5、堆内存：放我们创建的各种对象

最后，我们知道，我们写好的代码里，特别是一些方法中，可能会频繁的创建各种各样的对象，这些对象都是放在堆内存里的。

而且，我们通过之前的而学习，也都知道了一点，通常我们在JVM中分配给堆内存的空间其实一般是固定的。

既然如此，我们不停的在堆内存里创建对象，是不是说明，堆内存也有可能发生内存溢出？

`没错，第三块可能发生内存溢出的区域，就是堆内存空间。`