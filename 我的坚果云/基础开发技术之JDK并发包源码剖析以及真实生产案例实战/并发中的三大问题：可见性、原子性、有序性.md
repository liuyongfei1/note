### 并发中的三大问题：可见性、原子性、有序性

#### 可见性

A线程修改一个共享的变量，B线程却还一直用的修改前的变量，不能及时感知到。

#### 原子性

共享变量 i=0；

A线程操作 i++，i => 1

B线程操作i++，i => 2

这是我们期望的结果，但实际B线程运行的结果可能还是1。

#### 有序性

对于代码，同时还有一个问题是指令排序。

编译器和指令器，有的时候为了提高代码的执行效率，会将指令重排序，比如：

```java
flag = false;

// 线程1
perpare();  // 准备资源
flag = true;

// 线程2
while(!flag) {
	Thread.sleep(1000);
}

execute(); // 基于准备好的资源执行操作

```

重排序之后，让 flag = true 先执行了，结果直接跳过while等待直接执行某段代码了，结果prepare还没执行，就会导致代码逻辑出现异常。

