## 项目改造为微服务架构的整体思路

### 服务注册中心

用eureka server来做，我们要来思考服务注册和发现的核心运行过程中，有哪些地方是需要我们来配置和调整的。

#### 1.1 eureka server的请求压力

可以采用双机部署，然后eureka server两台机器之间会进行互相注册，完成eureka server集群的一个识别和构造。

eureka的设计原则，是纯碎基于自己的内存来设计的，也就是说不会依赖于数据库或网络请求，纯内存操作，都是很快的。

在中小型公司而言，部署2台eureka server组成一个集群，是妥妥的。

#### 1.2 服务注册的时效性

服务注册实际上是只要这个服务一启动，就会立马向eureka server，服务注册中心发送一个注册的请求。

服务注册的时效性应该是毫秒级的，起码在1秒内。

#### 1.3 服务发现的时效性

服务刚启动的时候，立马发现其他所有服务的时效性是毫秒级，立马就会去发送一个请求，拿到所有的注册表。

后面，如果说服务a新增了一台机器，此时服务b如果要发现服务a新增的这台机器，要过多久才可以发现？

eureka server有多级缓存机制。

每个服务拉取增量注册表的间隔，spring-cloud-netflix-eureka-client工程里的EurekaClientConfigBean，定义了所有参数的默认值，如果你要设置就是eureka.client为前缀，然后加上变量的名字，就可以设置自己的数值。

eureka服务的发现是分钟级的时效性。



### 分布式系统架构

你既然做成了微服务架构，就一定是一个分布式系统了，分布式系统就一定要用一些分布式的系统架构。

分布式事务、分布式锁、分布式会话、单点登录、分布式一致性、分布式接口冥等性。

限流、降级、超时、熔断、异常，主要是基于hystrix来做。